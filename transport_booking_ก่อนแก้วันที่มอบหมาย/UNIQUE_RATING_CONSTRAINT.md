# тЬЕ р╣Бр╕Бр╣Йр╣Др╕В: Booking р╕лр╣Йр╕▓р╕бр╕бр╕╡ Rating Link р╕Лр╣Йр╕│

## ЁЯОп р╕зр╕▒р╕Хр╕Цр╕╕р╕Ыр╕гр╕░р╕кр╕Зр╕Др╣М

**1 Booking = 1 Rating Link р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ** (р╕лр╣Йр╕▓р╕б booking_id р╕Лр╣Йр╕│)

---

## ЁЯУЛ р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В

### 1я╕ПтГг р╣Ар╕Юр╕┤р╣Ир╕б SQL Constraint

**р╣Др╕Яр╕ер╣М**: `models/delivery_rating.py`

```python
class DeliveryRating(models.Model):
    _name = 'delivery.rating'
    
    # ... fields ...
    
    # SQL Constraints
    _sql_constraints = [
        ('booking_unique', 'UNIQUE(booking_id)', 
         'тЪая╕П р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Щр╕╡р╣Йр╕бр╕╡ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з! р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│р╣Др╕Фр╣Й'),
    ]
```

**р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М**:
- тЬЕ Database р╕Ир╕░р╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Гр╕лр╣Й `booking_id` р╣Др╕бр╣Ир╕Лр╣Йр╕│
- тЬЕ р╕Цр╣Йр╕▓р╕Юр╕вр╕▓р╕вр╕▓р╕бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Лр╣Йр╕│ тЖТ р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Ар╕Хр╕╖р╕нр╕Щ

---

### 2я╕ПтГг р╣Бр╕Бр╣Йр╣Др╕В Method р╕кр╕гр╣Йр╕▓р╕З Rating Link

**р╣Др╕Яр╕ер╣М**: `models/delivery_rating.py`

**р╣Ар╕Фр╕┤р╕б** (р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣Ир╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕З):
```python
def action_create_rating_link(self):
    # р╕кр╕гр╣Йр╕▓р╕Зр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣Ир╣Ар╕кр╕бр╕н
    return {
        'res_model': 'delivery.rating',
        'view_mode': 'form',
        'target': 'new',
        'context': {'default_booking_id': self.id},
    }
```

**р╣Гр╕лр╕бр╣И** (р╣Ар╕Кр╣Зр╕Др╕Бр╣Ир╕нр╕Щр╕зр╣Ир╕▓р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И):
```python
def action_create_rating_link(self):
    # р╣Ар╕Кр╣Зр╕Др╕зр╣Ир╕▓р╕бр╕╡ Rating Link р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
    existing_rating = self.env['delivery.rating'].search([
        ('booking_id', '=', self.id)
    ], limit=1)
    
    if existing_rating:
        # тЬЕ р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з тЖТ р╣Ар╕Ыр╕┤р╕Ф rating р╣Ар╕Фр╕┤р╕б
        return {
            'name': 'ЁЯУЭ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Др╕зр╕▓р╕бр╕Юр╕╢р╕Зр╕Юр╕нр╣Гр╕И (р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з)',
            'res_id': existing_rating.id,
            'view_mode': 'form',
        }
    else:
        # тЬЕ р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡ тЖТ р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И
        return {
            'name': 'ЁЯУЭ р╕кр╕гр╣Йр╕▓р╕З Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Др╕зр╕▓р╕бр╕Юр╕╢р╕Зр╕Юр╕нр╣Гр╕И',
            'view_mode': 'form',
            'context': {'default_booking_id': self.id},
        }
```

---

## ЁЯОи User Experience

### Scenario 1: р╕кр╕гр╣Йр╕▓р╕З Rating Link р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б

```
1. р╕Др╕ер╕┤р╕Б "ЁЯУЭ р╕кр╕гр╣Йр╕▓р╕З Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╣Гр╕лр╕бр╣И"
2. р╣Ар╕Ыр╕┤р╕Фр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣И (unsaved)
3. р╕Бр╕Фр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
4. тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И
```

### Scenario 2: р╕Юр╕вр╕▓р╕вр╕▓р╕бр╕кр╕гр╣Йр╕▓р╕З Rating Link р╕Лр╣Йр╕│

**р╕Бр╕гр╕Ур╕╡ A: р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕бр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З**
```
1. р╕Др╕ер╕┤р╕Б "ЁЯУЭ р╕кр╕гр╣Йр╕▓р╕З Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╣Гр╕лр╕бр╣И" р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
2. тЬЕ р╣Ар╕Ыр╕┤р╕Ф Rating Link р╣Ар╕Фр╕┤р╕б (р╣Др╕бр╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И)
3. Title: "ЁЯУЭ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Др╕зр╕▓р╕бр╕Юр╕╢р╕Зр╕Юр╕нр╣Гр╕И (р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з)"
4. р╣Ар╕лр╣Зр╕Щ Link р╣Ар╕Фр╕┤р╕б + р╕кр╕Цр╕▓р╕Щр╕░р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ
```

**р╕Бр╕гр╕Ур╕╡ B: р╕Юр╕вр╕▓р╕вр╕▓р╕бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕лр╕бр╣И (р╕Цр╣Йр╕▓р╣Ар╕Ьр╕ер╕нр╕Бр╕Ф Duplicate)**
```
1. р╣Ар╕Ыр╕┤р╕Фр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣И + р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
2. тЭМ Database Error:
   "тЪая╕П р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Щр╕╡р╣Йр╕бр╕╡ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з! р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│р╣Др╕Фр╣Й"
```

---

## ЁЯУК р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### Case 1: Booking р╣Гр╕лр╕бр╣И (р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡ Rating)

```
Booking: BOOK/2025/001
Rating Links: (р╣Др╕бр╣Ир╕бр╕╡)

[р╕Бр╕Ф "р╕кр╕гр╣Йр╕▓р╕З Link р╣Гр╕лр╕бр╣И"]
тЖТ р╣Ар╕Ыр╕┤р╕Фр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣И
тЖТ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
тЖТ тЬЕ р╕кр╕гр╣Йр╕▓р╕З Rating Link р╣Бр╕гр╕Б

Rating Links: 1 р╕гр╕▓р╕вр╕Бр╕▓р╕г
тФЬтФА Token: abc123...
тФЬтФА р╕кр╕Цр╕▓р╕Щр╕░: ЁЯЯб р╕гр╕нр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щ
тФФтФА Link: http://...
```

### Case 2: Booking р╕Чр╕╡р╣Ир╕бр╕╡ Rating р╣Бр╕ер╣Йр╕з

```
Booking: BOOK/2025/001
Rating Links: 1 р╕гр╕▓р╕вр╕Бр╕▓р╕г (р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з)

[р╕Бр╕Ф "р╕кр╕гр╣Йр╕▓р╕З Link р╣Гр╕лр╕бр╣И"]
тЖТ тЬЕ р╣Ар╕Ыр╕┤р╕Ф Rating Link р╣Ар╕Фр╕┤р╕б (р╣Др╕бр╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И)
тЖТ Title: "ЁЯУЭ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Др╕зр╕▓р╕бр╕Юр╕╢р╕Зр╕Юр╕нр╣Гр╕И (р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з)"
тЖТ р╣Бр╕кр╕Фр╕З:
   - Link р╣Ар╕Фр╕┤р╕б
   - р╕кр╕Цр╕▓р╕Щр╕░ (pending/done/expired)
   - р╕Др╕░р╣Бр╕Щр╕Щ (р╕Цр╣Йр╕▓р╕бр╕╡)
   - р╕Др╕зр╕▓р╕бр╕Др╕┤р╕Фр╣Ар╕лр╣Зр╕Щ (р╕Цр╣Йр╕▓р╕бр╕╡)
```

### Case 3: р╕Юр╕вр╕▓р╕вр╕▓р╕бр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│р╣Вр╕Фр╕в Duplicate

```
Rating Form (р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з)
[р╕Бр╕Ф Action > Duplicate]
тЖТ р╕кр╕гр╣Йр╕▓р╕Зр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣И
тЖТ booking_id р╕Лр╣Йр╕│
[р╕Бр╕Фр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б]
тЖТ тЭМ Error:
   "тЪая╕П р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Щр╕╡р╣Йр╕бр╕╡ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з! 
    р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│р╣Др╕Фр╣Й"
```

---

## ЁЯФР Database Level Protection

### SQL Constraint:
```sql
ALTER TABLE delivery_rating
ADD CONSTRAINT booking_unique UNIQUE (booking_id);
```

**р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ**:
1. Database р╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Гр╕лр╣Й `booking_id` р╣Др╕бр╣Ир╕Лр╣Йр╕│
2. р╕Цр╣Йр╕▓р╕бр╕╡р╕Бр╕▓р╕г INSERT/UPDATE р╕Чр╕╡р╣Ир╕Чр╕│р╣Гр╕лр╣Йр╕Лр╣Йр╕│ тЖТ Error
3. Error р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Фр╣Др╕зр╣Й

---

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: Restart Odoo
```bash
cd C:\Program Files\Odoo 18.0.20251009\server\custom-addons\transport_booking
restart_odoo_unique_rating.bat
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: Upgrade Module
```
Settings тЖТ Apps тЖТ "transport_booking" тЖТ Upgrade
```

**р╕кр╕│р╕Др╕▒р╕Н**: Odoo р╕Ир╕░р╕кр╕гр╣Йр╕▓р╕З unique constraint р╣Гр╕Щ database р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Чр╕Фр╕кр╕нр╕Ъ

**A. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕гр╣Йр╕▓р╕З Rating Link р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б**:
```
1. р╣Ар╕Ыр╕┤р╕Ф Booking (state = done)
2. р╣Бр╕Чр╣Зр╕Ъ "тнР р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Др╕зр╕▓р╕бр╕Юр╕╢р╕Зр╕Юр╕нр╣Гр╕И"
3. р╕Др╕ер╕┤р╕Б "ЁЯУЭ р╕кр╕гр╣Йр╕▓р╕З Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╣Гр╕лр╕бр╣И"
4. тЬЕ р╣Ар╕Ыр╕┤р╕Фр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣И
5. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
6. тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И
```

**B. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│**:
```
1. (Booking р╣Ар╕Фр╕┤р╕б) р╕Др╕ер╕┤р╕Б "ЁЯУЭ р╕кр╕гр╣Йр╕▓р╕З Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╣Гр╕лр╕бр╣И" р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
2. тЬЕ р╣Ар╕Ыр╕┤р╕Ф Rating Link р╣Ар╕Фр╕┤р╕б (р╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╕бр╣И)
3. Title: "... (р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з)"
4. р╣Ар╕лр╣Зр╕Щ Link + р╕кр╕Цр╕▓р╕Щр╕░
```

**C. р╕Чр╕Фр╕кр╕нр╕Ъ Duplicate (р╕Цр╣Йр╕▓р╕нр╕вр╕▓р╕Бр╕ер╕нр╕З)**:
```
1. р╣Ар╕Ыр╕┤р╕Ф Rating Form
2. Action тЖТ Duplicate
3. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
4. тЭМ Error: "р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Щр╕╡р╣Йр╕бр╕╡ Link р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з!"
```

---

## ЁЯУЭ р╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ър╕Хр╣Ир╕нр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Фр╕┤р╕б

### р╕Цр╣Йр╕▓р╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Бр╣Ир╕▓р╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з:

**Scenario**: р╕бр╕╡ Booking р╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щр╕Чр╕╡р╣Ир╕бр╕╡ 2+ Rating Links

**р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М**:
1. Upgrade module р╕Ир╕░р╕ер╣Йр╕бр╣Ар╕лр╕ер╕з
2. Error: "UNIQUE constraint violated"

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й**:
```sql
-- р╕ер╕Ъ Rating Links р╕Лр╣Йр╕│ (р╣Ар╕Бр╣Зр╕Ър╣Бр╕Др╣Ир╕нр╕▒р╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Ф)
DELETE FROM delivery_rating
WHERE id NOT IN (
    SELECT MAX(id)
    FROM delivery_rating
    GROUP BY booking_id
);
```

р╕лр╕гр╕╖р╕нр╕ер╕Ър╕Ьр╣Ир╕▓р╕Щ Odoo:
```
1. р╣Ар╕Вр╣Йр╕▓ Developer Mode
2. Technical тЖТ Database Structure тЖТ Delivery Rating
3. р╕лр╕▓ booking_id р╕Чр╕╡р╣Ир╕Лр╣Йр╕│
4. р╕ер╕Ър╕нр╕▒р╕Щр╣Ар╕Бр╣Ир╕▓ (р╣Ар╕Бр╣Зр╕Ър╣Бр╕Др╣Ир╕нр╕▒р╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Ф)
5. Upgrade module
```

---

## ЁЯОп р╕кр╕гр╕╕р╕Ы

### тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Др╕Фр╣Й:
- 1 Booking = 1 Rating Link р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
- р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕З Rating Link р╕Лр╣Йр╕│
- р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕бр╕Лр╣Йр╕│ тЖТ р╣Ар╕Ыр╕┤р╕Ф Rating р╣Ар╕Фр╕┤р╕б
- Database р╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Гр╕лр╣Й unique

### тЬЕ р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ:
- тЭМ Rating Links р╕Лр╣Йр╕│
- тЭМ Link р╕лр╕ер╕▓р╕вр╕нр╕▒р╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ъ Booking р╣Ар╕Фр╕╡р╕вр╕з
- тЭМ р╕Др╕зр╕▓р╕бр╕кр╕▒р╕Ър╕кр╕Щр╕зр╣Ир╕▓ Link р╣Др╕лр╕Щр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### тЬЕ р╕Ыр╕гр╕░р╣Вр╕вр╕Кр╕Щр╣М:
- тЬЕ р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕░р╕нр╕▓р╕Ф р╣Др╕бр╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ
- тЬЕ р╕Зр╣Ир╕▓р╕вр╕Хр╣Ир╕нр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕г
- тЬЕ р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Др╕бр╣Ир╕кр╕▒р╕Ър╕кр╕Щ (Link р╣Ар╕Фр╕╡р╕вр╕з)
- тЬЕ р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (1 Booking = 1 Rating)

---

## ЁЯУК Database Schema

```
delivery_rating
тФЬтФА id (PRIMARY KEY)
тФЬтФА booking_id (UNIQUE) тЖР ЁЯФТ р╕лр╣Йр╕▓р╕бр╕Лр╣Йр╕│!
тФЬтФА rating_token (UNIQUE)
тФЬтФА rating_stars
тФЬтФА customer_comment
тФЬтФА state
тФФтФА ...
```

---

**р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╕Щ**: 18.0.2.5.0  
**р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕▒р╕Ыр╣Ар╕Фр╕Х**: 27 р╕Хр╕╕р╕ер╕▓р╕Др╕б 2568  
**р╕кр╕Цр╕▓р╕Щр╕░**: тЬЕ р╣Бр╕Бр╣Йр╣Др╕Вр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М  
**Breaking Change**: тЭМ р╣Др╕бр╣Ир╕бр╕╡ (backward compatible)
