# ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Auto-Refresh ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GPS Tracking List

## ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£ **Auto-Refresh ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ GPS Tracking List (‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° "üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS")

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

1. **‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ tracking_interval** ‡∏à‡∏≤‡∏Å `tracking.settings` (‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô 15 ‡∏ô‡∏≤‡∏ó‡∏µ)
2. **Refresh list ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** ‡∏ó‡∏∏‡∏Å 15 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á)
3. **‡πÅ‡∏™‡∏î‡∏á notification** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô auto-refresh

## ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### 1. ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà: `static/src/js/tracking_auto_refresh.js`
JavaScript controller ‡∏ó‡∏µ‡πà‡∏ó‡∏≥ auto-refresh ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö vehicle.tracking list view

**‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥:**
- ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤ `tracking_interval` ‡∏à‡∏≤‡∏Å tracking.settings
- Refresh list view ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- ‡πÅ‡∏™‡∏î‡∏á notification ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- Cleanup ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ (‡πÑ‡∏°‡πà‡∏°‡∏µ memory leak)

### 2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: `__manifest__.py`
‡πÄ‡∏û‡∏¥‡πà‡∏° `tracking_auto_refresh.js` ‡∏•‡∏á‡πÉ‡∏ô assets

```python
'assets': {
    'web.assets_backend': [
        ...
        'transport_booking/static/src/js/tracking_auto_refresh.js',  # ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
        ...
    ],
}
```

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Module

‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ô Command Prompt (Run as Administrator):

```batch
cd /d "C:\Program Files\Odoo 18.0.20251009\server\custom-addons\transport_booking"
UPDATE_TRACKING_AUTO_REFRESH.bat
```

‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á:
```batch
net stop odoo-server-18.0
timeout /t 3
net start odoo-server-18.0
```

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. ‡πÄ‡∏õ‡∏¥‡∏î Odoo
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Vehicle Booking
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS"** (Smart Button)
4. ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô notification: "üîÑ Auto-refresh ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏ó‡∏∏‡∏Å 15 ‡∏ô‡∏≤‡∏ó‡∏µ)"
5. List ‡∏à‡∏∞ refresh ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å 15 ‡∏ô‡∏≤‡∏ó‡∏µ

### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡πÄ‡∏õ‡∏¥‡∏î Browser Console (F12) ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:
```
‚úÖ [Auto-Refresh] Loaded tracking_interval: 15 minutes
üîÑ [Auto-Refresh] Starting auto-refresh every 15 minutes
üîÑ [Auto-Refresh] Refreshing tracking list...
‚úÖ [Auto-Refresh] List refreshed successfully
```

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ refresh:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Settings** > **Tracking Settings** (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ)
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç **"‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° (‡∏ô‡∏≤‡∏ó‡∏µ)"**
3. **Logout ‡πÅ‡∏•‡πâ‡∏ß Login ‡πÉ‡∏´‡∏°‡πà** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
4. ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ GPS Tracking List ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- Auto-refresh ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ **vehicle.tracking list view** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Å‡∏±‡∏ö tracking map ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- ‡∏Ñ‡πà‡∏≤ tracking_interval ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á list view ‡πÅ‡∏•‡∏∞ tracking map
- ‡∏Å‡∏≤‡∏£ refresh ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö reload ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ (‡πÉ‡∏ä‡πâ AJAX)

## ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• GPS ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥  
‚úÖ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏î F5 ‡πÄ‡∏≠‡∏á  
‚úÖ ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ tracking_interval ‡∏à‡∏≤‡∏Å settings  
‚úÖ ‡πÅ‡∏™‡∏î‡∏á notification ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô  
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ memory leak (cleanup ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)

## Troubleshooting

### ‡∏ñ‡πâ‡∏≤ auto-refresh ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

1. ‡πÄ‡∏ä‡πá‡∏Ñ Browser Console (F12) ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ error ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ tracking_interval ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:
   ```sql
   SELECT * FROM tracking_settings;
   ```
3. ‡∏•‡∏≠‡∏á Clear Browser Cache ‡πÅ‡∏•‡∏∞ Logout/Login ‡πÉ‡∏´‡∏°‡πà
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ JavaScript file ‡∏ñ‡∏π‡∏Å load:
   - ‡πÄ‡∏õ‡∏¥‡∏î Browser DevTools > Sources
   - ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ `tracking_auto_refresh.js` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î auto-refresh

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `tracking_auto_refresh.js` ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 20:
```javascript
// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å
if (this.props.resModel === "vehicle.tracking") {

// ‡πÄ‡∏õ‡πá‡∏ô
if (false && this.props.resModel === "vehicle.tracking") {
```

‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö JavaScript file ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å `__manifest__.py`
