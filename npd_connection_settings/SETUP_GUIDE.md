# NPD Connection Settings - à¸ªà¸£à¸¸à¸›à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡

## âœ… à¹‚à¸¡à¸”à¸¹à¸¥ Odoo à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§

### ğŸ“ à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡
```
C:\Program Files\Odoo 18.0.20251009\server\custom-addons\npd_connection_settings\
```

### ğŸ“¦ à¸ªà¹ˆà¸§à¸™à¸›à¸£à¸°à¸à¸­à¸šà¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡

#### 1. Model (models.py)
- `npd.connection.config` - à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­

#### 2. Views (views/connection_views.xml)
- Form View - à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸à¹‰à¹„à¸‚à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
- Tree View - à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
- Search View - à¸„à¹‰à¸™à¸«à¸² Filter
- Action Window

#### 3. Menu (views/menu_items.xml)
**à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡:** Settings > Company > NPD Connection Settings
- à¹€à¸¡à¸™à¸¹à¸¢à¹ˆà¸­à¸¢à¸‚à¸­à¸‡ `base.menu_company`
- à¸¡à¸µà¹€à¸‰à¸à¸²à¸° System Admin à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™

#### 4. Security (security/ir_model_access.xml)
- Access control à¸ªà¸³à¸«à¸£à¸±à¸šà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸¸à¸à¸„à¸™

#### 5. API Controller (controllers/connection_controller.py)
- `/api/npd/connection/get_active` - à¸”à¸¶à¸‡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- `/api/npd/connection/get_all` - à¸”à¸¶à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- `/api/npd/connection/get_by_id/<id>` - à¸”à¸¶à¸‡à¸•à¸²à¸¡ ID
- `/api/npd/connection/set_active/<id>` - à¸•à¸±à¹‰à¸‡à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¹à¸šà¸šà¹ƒà¸Šà¹‰à¸‡à¸²à¸™

---

## âœ… Flutter App à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§

### ğŸ“± à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡/à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡

#### 1. ConnectionManager Service
**à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡:** `lib/services/connection_manager.dart`

**à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™:**
```dart
// à¸”à¸¶à¸‡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™
await ConnectionManager.getActiveConnection()

// à¸”à¸¶à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
await ConnectionManager.getAllConnections()

// à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
await ConnectionManager.setActiveConnection(id)

// à¸¥à¹‰à¸²à¸‡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
await ConnectionManager.clearSettings()
```

#### 2. Connection Settings Screen
**à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡:** `lib/screens/connection_settings_screen.dart`

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- âœ… à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- âœ… à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- âœ… à¹à¸ªà¸”à¸‡ URL, Database, Username
- âœ… Refresh à¹€à¸à¸·à¹ˆà¸­à¸­à¸±à¸à¹€à¸”à¸—
- âœ… Error Handling

---

## ğŸš€ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸›

### 1. à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹‚à¸¡à¸”à¸¹à¸¥
```bash
# Odoo CLI à¸«à¸£à¸·à¸­
# Settings > Apps > à¸„à¹‰à¸™à¸«à¸² "NPD Connection Settings" > Install
```

### 2. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹ƒà¸™ Odoo
```
Settings > Company > NPD Connection Settings > Create
```

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```
Connection Name: NPD Main
Server URL/IP: https://npd-solution.com
Database Name: NPD_Logistics
Username: Npd_admin
Password: 1234
Active: âœ“
```

### 3. à¸£à¸§à¸¡à¹€à¸‚à¹‰à¸² Flutter App
```dart
// à¹ƒà¸™ main.dart à¸«à¸£à¸·à¸­ home_screen.dart
import 'package:npd_transport_app/services/connection_manager.dart';
import 'package:npd_transport_app/screens/connection_settings_screen.dart';

// à¸”à¸¶à¸‡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
final config = await ConnectionManager.getActiveConnection();

// à¹ƒà¸Šà¹‰à¹ƒà¸™ OdooService
OdooService.switchConnection(
  config?['server_url'] ?? 'http://localhost:8078',
  config?['database_name'] ?? 'Npd_Transport',
  config?['username'] ?? 'Npd_admin',
  config?['password'] ?? '1234',
);
```

### 4. à¹€à¸à¸´à¹ˆà¸¡à¹€à¸¡à¸™à¸¹à¹ƒà¸™à¹à¸­à¸›
```dart
// à¹ƒà¸™à¹€à¸¡à¸™à¸¹ Drawer à¸«à¸£à¸·à¸­ Settings
ListTile(
  leading: Icon(Icons.settings),
  title: Text('Connection Settings'),
  onTap: () {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (context) => const ConnectionSettingsScreen(),
      ),
    );
  },
),
```

---

## ğŸ“Š Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Flutter App (npd_transport_app)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     ConnectionSettingsScreen                 â”‚   â”‚
â”‚  â”‚  - à¸‚à¸­à¸£à¸²à¸¢à¸à¸²à¸£à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­                      â”‚   â”‚
â”‚  â”‚  - à¹ƒà¸«à¹‰à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­                      â”‚   â”‚
â”‚  â”‚  - à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡ SharedPreferences               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     ConnectionManager Service                â”‚   â”‚
â”‚  â”‚  - à¹€à¸£à¸µà¸¢à¸ API à¸‚à¸­à¸‡ Odoo                        â”‚   â”‚
â”‚  â”‚  - à¸ˆà¸±à¸”à¸à¸²à¸£ Cache (SharedPreferences)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Odoo 18 (npd_connection_settings)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     NPD Connection Settings Module           â”‚   â”‚
â”‚  â”‚  Settings > Company > NPD Connection Sett... â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ - Connection 1: NPD Main (Active)    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - Connection 2: NPD Dev              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - Connection 3: NPD Test             â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     API Endpoints                            â”‚   â”‚
â”‚  â”‚  - GET /api/npd/connection/get_active       â”‚   â”‚
â”‚  â”‚  - GET /api/npd/connection/get_all          â”‚   â”‚
â”‚  â”‚  - POST /api/npd/connection/set_active/<id> â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Test API à¸”à¹‰à¸§à¸¢ Postman

### 1. à¸”à¸¶à¸‡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™
```
GET http://localhost:8078/api/npd/connection/get_active
```

### 2. à¸”à¸¶à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
```
GET http://localhost:8078/api/npd/connection/get_all
```

### 3. à¸•à¸±à¹‰à¸‡à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
```
POST http://localhost:8078/api/npd/connection/set_active/1
```

---

## ğŸ“ Database Schema

### Table: npd_connection_config

| Column | Type | Description |
|--------|------|-------------|
| id | Integer | Primary Key |
| name | Char | Connection Name |
| is_active | Boolean | Active Status |
| server_url | Char | Server URL/IP |
| database_name | Char | Database Name |
| username | Char | Username |
| password | Char | Password |
| description | Text | Description |
| created_date | Datetime | Created Date |
| last_modified | Datetime | Last Modified |

---

## ğŸ¯ à¸‚à¹‰à¸­à¸”à¸µ

âœ… **Centralized Management** - à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ˆà¸²à¸à¹€à¸¡à¸™à¸¹à¹€à¸”à¸µà¸¢à¸§
âœ… **Dynamic Switching** - à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ Restart App
âœ… **Offline Support** - à¹ƒà¸Šà¹‰ Cache à¸–à¹‰à¸²à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢à¸‚à¸²à¸”
âœ… **Easy Integration** - à¹ƒà¸Šà¹‰ ConnectionManager à¸‡à¹ˆà¸²à¸¢à¹†
âœ… **Multiple Servers** - à¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸«à¸¥à¸²à¸¢à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ
âœ… **Secure** - à¹€à¸‰à¸à¸²à¸° System Admin à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™

---

## ğŸ“Œ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸³à¸„à¸±à¸

1. **URL à¸‚à¸­à¸‡ Manager:** à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹ƒà¸«à¹‰ Machine à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸‚à¹‰à¸² Odoo à¹„à¸”à¹‰
2. **SharedPreferences:** à¸—à¸³à¸à¸²à¸£ Cache à¹€à¸à¸·à¹ˆà¸­à¸£à¸­à¸‡à¸£à¸±à¸š Offline Mode
3. **Password:** à¸­à¸¢à¹ˆà¸²à¸¥à¸·à¸¡à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Password à¹ƒà¸™à¸£à¸°à¸šà¸šà¸ˆà¸£à¸´à¸‡
4. **Active Connection:** à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡ Connection à¹ƒà¸«à¸¡à¹ˆ à¹ƒà¸«à¹‰à¸•à¸±à¹‰à¸‡ Active à¹€à¸›à¹‡à¸™ True

---

## ğŸ“ à¸•à¸´à¸”à¸•à¹ˆà¸­
à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¸³à¸–à¸²à¸¡ à¸«à¸£à¸·à¸­à¸›à¸±à¸à¸«à¸² à¸•à¸´à¸”à¸•à¹ˆà¸­à¸—à¸µà¸¡ NPD Solutions

**Version:** 1.0
**Last Updated:** 2025-01-09
